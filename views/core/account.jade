extends layout-account

block styles
  style(type='text/css')
    .form-horizontal .control-group {
      margin-bottom: 10px;
    }

    .controls-hint {
      color: #999;
    }

    .bio-counter {
      width: 530px;
    }

    .bio-counter-label {
      color: #999;
      float: right;
      font-weight: bold;
    }

block content
  include shared/tb-mixins
  h3
    i.icon-user
    | &nbsp;#{title}
  mixin showInfo(info, true)
  mixin showError(error)
  hr
  form.form-horizontal(id='frmAccount', name='frmAccount', method='post', action='/account', enctype='multipart/form-data')
    input(type='hidden', name='_csrf', value=token)
    div.control-group
      div.control-label Picture
      div.controls
        a(href='#{config.env.avatarServer}', target='_blank')
          img(src='#{config.env.avatarServer}/avatar/#{user.pictureId}', alt='Gravatar')
        p.controls-hint
          | Click the picture to configure your avatar
    div.control-group
      div.control-label
        label(for='name') Name
      div.controls
        input(type='text', required, id='name', name='name', value=user.name)
        p.controls-hint 
          | Enter your real name, so people you know can recognize you.
    div.control-group
      div.control-label
        label(for='location') Location
      div.controls
        //- input(type='text', id='location', name='location', value=user.location)
        div.bfh-selectbox.bfh-countries(data-country='#{user.location}', data-flags='true')
          input(type='hidden', name='location', value='')
          a.bfh-selectbox-toggle(role='button', data-toggle='bfh-selectbox', href='#')
            span.bfh-selectbox-option.input-medium(data-option='')
            b.caret
          div.bfh-selectbox-options
            input.bfh-selectbox-filter(type='text')
            ul(role='options')
        p.controls-hint
          | Where in the world are you?
    div.control-group
      div.control-label
        label(for='website') Website
      div.controls
        input(type='text', id='website', name='website', value=user.website)
        p.controls-hint
          | Have a homepage or a blog? Put the address here.
    div.control-group
      div.control-label
        label(for='bio') Bio
      div.controls
        textarea.input-xxlarge(id='bio', name='bio', rows='3', style='resize: vertical')= user.bio
        p.controls-hint.bio-counter
          | About yourself in 160 characters or less.
          span.bio-counter-label(id='bio_counter') 160
    hr
    div.form-actions(style='border-top: none;padding-top:0;')
      input.m-btn.blue(type='submit', value='Save Changes')
      a.m-btn.black(href='/timeline', style='vertical-align: middle;')
        i.m-icon-swapleft.m-icon-white
        | &nbsp;Cancel

block scripts
  script(src='/js/knockout.min.js', type='text/javascript')
  script(src='/js/collabjs.js', type='text/javascript')
  script(src='/js/collabjs.account.js', type='text/javascript')
/*!
* collab.js v0.4.0
* Copyright (c) 2013-2014 Denis Vuyka
* License: MIT
* http://www.opensource.org/licenses/mit-license.php
*/
angular.module("collabjs",["ngRoute","ngSanitize","collabjs.services","collabjs.filters","collabjs.directives","collabjs.controllers","angularMoment","infinite-scroll","ui.select2","chieffancypants.loadingBar","ngAnimate"]).config(["$routeProvider",function($routeProvider){"use strict";var auth=function($q,$timeout,$http,$location,authService){var deferred=$q.defer();return $http.get("/api/auth/check").success(function(user){"0"!==user?(authService.setCurrentUser(user),$timeout(deferred.resolve,0)):(authService.setCurrentUser(null),$timeout(function(){deferred.reject(null)},0),$location.url("/login"))}),deferred.promise},defaultRedirect=function($q,$http,$location,$timeout,authService){var deferred=$q.defer(),user=authService.getCurrentUser();return user?($location.path("/news").replace(),$timeout(deferred.resolve,0)):$http.get("/api/auth/check").success(function(user){"0"!==user?(authService.setCurrentUser(user),$timeout(deferred.resolve,0),$location.path("/news").replace()):(authService.setCurrentUser(null),$timeout(deferred.resolve,0))}),deferred.promise};$routeProvider.when("/",{templateUrl:"/partials/index",resolve:{isLoggedIn:defaultRedirect}}).when("/login",{templateUrl:"/templates/login.html",controller:"LoginController",resolve:{isLoggedIn:defaultRedirect}}).when("/register",{templateUrl:"/templates/register.html",controller:"RegistrationController",resolve:{isLoggedIn:defaultRedirect}}).when("/news",{templateUrl:"/templates/news.html",controller:"NewsController",resolve:{isLoggedIn:auth}}).when("/people",{templateUrl:"/templates/people.html",controller:"PeopleListController",resolve:{isLoggedIn:auth}}).when("/people/:account",{templateUrl:"/templates/wall.html",controller:"WallController",resolve:{isLoggedIn:auth}}).when("/people/:account/following",{templateUrl:"/templates/following.html",controller:"FollowingController",resolve:{isLoggedIn:auth}}).when("/people/:account/followers",{templateUrl:"/templates/followers.html",controller:"FollowersController",resolve:{isLoggedIn:auth}}).when("/mentions",{templateUrl:"/templates/mentions.html",controller:"MentionsController",resolve:{isLoggedIn:auth}}).when("/posts/:postId",{templateUrl:"/templates/post.html",controller:"PostController",resolve:{isLoggedIn:auth}}).when("/account",{templateUrl:"/templates/account-profile.html",controller:"AccountController",resolve:{isLoggedIn:auth}}).when("/account/password",{templateUrl:"/templates/account-password.html",controller:"PasswordController",resolve:{isLoggedIn:auth}}).when("/search",{templateUrl:"/templates/search-posts.html",controller:"SearchController",resolve:{isLoggedIn:auth}}).when("/help/:article?",{templateUrl:"/templates/help.html",controller:"HelpController"}).otherwise({redirectTo:"/news"})}]),angular.module("collabjs.services",["ngResource"]),angular.module("collabjs.directives",[]),angular.module("collabjs.filters",[]),angular.module("collabjs.controllers",[]);
/*!
* collab.js v0.4.0
* Copyright (c) 2013 Denis Vuyka
* License: MIT
* http://www.opensource.org/licenses/mit-license.php
*/
angular.module("collabjs",["ngRoute","ngSanitize","collabjs.services","collabjs.filters","collabjs.directives","collabjs.controllers","angularMoment","infinite-scroll","ui.select2","chieffancypants.loadingBar","ngAnimate"]).config(["$routeProvider",function($routeProvider){"use strict";var auth=function($q,$timeout,$http,$location,authService){var deferred=$q.defer();return $http.get("/api/auth/check").success(function(user){"0"!==user?(authService.setCurrentUser(user),$timeout(deferred.resolve,0)):(authService.setCurrentUser(null),$timeout(function(){deferred.reject(null)},0),$location.url("/login"))}),deferred.promise},defaultRedirect=function($q,$http,$location,$timeout,authService){var deferred=$q.defer(),user=authService.getCurrentUser();return user?($location.path("/news").replace(),$timeout(deferred.resolve,0)):$http.get("/api/auth/check").success(function(user){"0"!==user?(authService.setCurrentUser(user),$timeout(deferred.resolve,0),$location.path("/news").replace()):(authService.setCurrentUser(null),$timeout(deferred.resolve,0))}),deferred.promise};$routeProvider.when("/",{templateUrl:"/partials/index",resolve:{isLoggedIn:defaultRedirect}}).when("/login",{templateUrl:"/partials/login",controller:"LoginController",resolve:{isLoggedIn:defaultRedirect}}).when("/register",{templateUrl:"/partials/register",controller:"RegistrationController",resolve:{isLoggedIn:defaultRedirect}}).when("/news",{templateUrl:"/partials/news",controller:"NewsController",resolve:{isLoggedIn:auth}}).when("/people",{templateUrl:"/partials/people",controller:"PeopleListController",resolve:{isLoggedIn:auth}}).when("/people/:account",{templateUrl:"/partials/wall",controller:"WallController",resolve:{isLoggedIn:auth}}).when("/people/:account/following",{templateUrl:"/partials/following",controller:"FollowingController",resolve:{isLoggedIn:auth}}).when("/people/:account/followers",{templateUrl:"/partials/followers",controller:"FollowersController",resolve:{isLoggedIn:auth}}).when("/mentions",{templateUrl:"/partials/mentions",controller:"MentionsController",resolve:{isLoggedIn:auth}}).when("/posts/:postId",{templateUrl:"/partials/post",controller:"PostController",resolve:{isLoggedIn:auth}}).when("/account",{templateUrl:"/partials/account",controller:"AccountController",resolve:{isLoggedIn:auth}}).when("/account/password",{templateUrl:"/partials/password",controller:"PasswordController",resolve:{isLoggedIn:auth}}).when("/search",{templateUrl:"/partials/search",controller:"SearchController",resolve:{isLoggedIn:auth}}).when("/help/:article?",{templateUrl:"/partials/help",controller:"HelpController"}).otherwise({redirectTo:"/news"})}]),angular.module("collabjs.services",["ngResource"]),angular.module("collabjs.directives",[]),angular.module("collabjs.filters",[]),angular.module("collabjs.controllers",[]);